# -*- coding: utf-8 -*-
import scrapy
from ..items import GupiaoXinlangItem


class GupiaoXinlangSpSpider(scrapy.Spider):
    name = 'gupiao_xinlang_sp'
    allowed_domains = ['sina.com']
    headers = {
        "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3",
        "Accept-Encoding": "gzip, deflate",
        "Accept-Language": "zh-CN,zh;q=0.9,en;q=0.8",
        "Cache-Control": "max-age=0",
        "Connection": "keep-alive",
        "Cookie": "SINAGLOBAL=58.247.81.182_1508291435.886351; SGUID=1508291436402_35056698; U_TRS1=0000008a.bfb92897.5a5d9b5b.d78414bf; vjuids=e2dec343f.162a378c05d.0.cd9739b746e28; SCF=Anzoe8I_2CvCdXiHicYvnnPQchFu39BC2hN4uEmGuX_BE2nXHZ41vlNR7K-mviuzGBZj9tgxscoZqekcIojG6fA.; UOR=,,; UM_distinctid=16ab59e3cec214-0cdbd7fbe88e7f-37627606-13c680-16ab59e3ced2d1; lxlrttp=1560672234; Apache=58.247.81.182_1568166944.886594; ULV=1568972080306:155:3:1:58.247.81.182_1568166944.886594:1567673380924; U_TRS2=0000008a.6f445676.5d84add1.3ae242e5; vjlast=1568976426; SUBP=0033WrSXqPxfM725Ws9jqgMF55529P9D9W5DH3Q0UdU2.dXOosJEqVlI5NHD95QpSKqcSKzE1KBpWs4DqcjkUNHjICH8SC-R1F-4BCH8SC-4eEHWSCH8SC-4eEHWSBtt; SUB=_2A25wjFpIDeRhGedL7VQU8izFzz2IHXVT-MyArDV_PUNbm9BeLUPmkW9NVPe04SDQq7eShRgKi0sJITEZluKHOJHu; ALF=1600740761; FIN_ALL_VISITED=sh688006; FINA_V_S_2=sh688006; SR_SEL=1_511",
        "Host": "vip.stock.finance.sina.com.cn",
        "If-Modified-Since": "Mon, 23 Sep 2019 05:35:39 GMT",
        "Upgrade-Insecure-Requests": "1",
        "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.132 Safari/537.36"
    }

    def start_requests(self):
        base_url = "http://vip.stock.finance.sina.com.cn/corp/go.php/vMS_MarketHistory/stockid/"
        shanghai_stockid_list = ["201000","201001","201002","201003","201004","201005","201008","201009","201010","202001","202003","202007","203007","203008","203009","203016","203017","203018","203019","203020","203021","203031","203032","203033","203040","203041","203042","203043","203044","203045","203049","203050","203051","203052","203053","203054","204001","204002","204003","204004","204007","204014","204028","204091","204182","500001","500002","500003","500005","500006","500007","500008","500009","500010","500011","500013","500015","500016","500017","500018","500019","500021","500025","500028","500029","500035","500038","500039","500056","500058","501000","501001","501002","501003","501005","501007","501008","501009","501010","501011","501012","501015","501016","501017","501018","501019","501020","501021","501022","501023","501025","501026","501027","501028","501029","501030","501031","501032","501035","501036","501037","501038","501039","501040","501043","501045","501046","501047","501048","501049","501050","501051","501053","501054","501057","501058","501059","501060","501061","501062","501063","501064","501065","501066","501067","501068","501069","501070","501072","501081","501106","501186","501188","501189","501300","501301","501302","501303","501305","501306","501307","501309","501310","501311","502000","502001","502002","502003","502004","502005","502006","502007","502008","502010","502011","502012","502013","502014","502015","502016","502017","502018","502020","502021","502022","502023","502024","502025","502026","502027","502028","502031","502032","502036","502037","502038","502040","502041","502042","502048","502049","502050","502053","502054","502055","502056","502057","502058","505888","510010","510020","510030","510050","510060","510070","510090","510110","510120","510130","510150","510160","510170","510180","510190","510210","510220","510230","510260","510270","510280","510290","510300","510310","510330","510350","510360","510380","510390","510410","510420","510430","510440","510450","510500","510510","510520","510550","510560","510580","510590","510600","510610","510620","510630","510650","510660","510680","510700","510710","510800","510810","510820","510850","510880","510890","510900","511010","511020","511030","511210","511220","511230","511260","511270","511280","511290","511310","511600","511620","511650","511660","511670","511680","511690","511700","511760","511770","511800","511810","511820","511830","511850","511860","511880","511890","511900","511910","511920","511930","511950","511960","511970","511980","511990","512000","512010","512040","512070","512090","512100","512110","512120","512150","512160","512170","512180","512190","512200","512210","512220","512230","512260","512270","512280","512290","512300","512310","512330","512340","512360","512380","512390","512400","512480","512500","512510","512520","512550","512560","512570","512580","512590","512600","512610","512640","512660","512670","512680","512690","512700","512710","512720","512750","512760","512770","512780","512790","512800","512810","512820","512850","512860","512870","512880","512890","512900","512910","512920","512930","512950","512960","512980","512990","513000","513030","513050","513100","513500","513520","513600","513660","513680","513800","513880","513900","515000","515880","518800","518880","580012","580013","580014","580016","580017","580019","580020","580021","580022","580023","580024","580025","580026","580027","600000","600001","600002","600003","600004","600005","600006","600007","600008","600009","600010","600011","600012","600015","600016","600017","600018","600019","600020","600021","600022","600023","600025","600026","600027","600028","600029","600030","600031","600033","600035","600036","600037","600038","600039","600048","600050","600051","600052","600053","600054","600055","600056","600057","600058","600059","600060","600061","600062","600063","600064","600065","600066","600067","600068","600069","600070","600071","600072","600073","600074","600075","600076","600077","600078","600079","600080","600081","600082","600083","600084","600085","600086","600087","600088","600089","600090","600091","600092","600093","600094","600095","600096","600097","600098","600099","600100","600101","600102","600103","600104","600105","600106","600107","600108","600109","600110","600111","600112","600113","600114","600115","600116","600117","600118","600119","600120","600121","600122","600123","600125","600126","600127","600128","600129","600130","600131","600132","600133","600135","600136","600137","600138","600139","600141","600143","600145","600146","600148","600149","600150","600151","600152","600153","600155","600156","600157","600158","600159","600160","600161","600162","600163","600165","600166","600167","600168","600169","600170","600171","600172","600173","600175","600176","600177","600178","600179","600180","600181","600182","600183","600184","600185","600186","600187","600188","600189","600190","600191","600192","600193","600195","600196","600197","600198","600199","600200","600201","600202","600203","600205","600206","600207","600208","600209","600210","600211","600212","600213","600215","600216","600217","600218","600219","600220","600221","600222","600223","600225","600226","600227","600228","600229","600230","600231","600232","600233","600234","600235","600236","600237","600238","600239","600240","600241","600242","600243","600246","600247","600248","600249","600250","600251","600252","600253","600255","600256","600257","600258","600259","600260","600261","600262","600263","600265","600266","600267","600268","600269","600270","600271","600272","600273","600275","600276","600277","600278","600279","600280","600281","600282","600283","600284","600285","600286","600287","600288","600289","600290","600291","600292","600293","600295","600296","600297","600298","600299","600300","600301","600302","600303","600305","600306","600307","600308","600309","600310","600311","600312","600313","600315","600316","600317","600318","600319","600320","600321","600322","600323","600325","600326","600327","600328","600329","600330","600331","600332","600333","600335","600336","600337","600338","600339","600340","600343","600345","600346","600348","600349","600350","600351","600352","600353","600354","600355","600356","600357","600358","600359","600360","600361","600362","600363","600365","600366","600367","600368","600369","600370","600371","600372","600373","600375","600376","600377","600378","600379","600380","600381","600382","600383","600385","600386","600387","600388","600389","600390","600391","600392","600393","600395","600396","600397","600398","600399","600400","600401","600403","600405","600406","600408","600409","600410","600415","600416","600418","600419","600420","600421","600422","600423","600425","600426","600428","600429","600432","600433","600435","600436","600438","600439","600444","600446","600448","600449","600452","600455","600456","600458","600459","600460","600461","600462","600463","600466","600467","600468","600469","600470","600472","600475","600476","600477","600478","600479","600480","600481","600482","600483","600485","600486","600487","600488","600489","600490","600491","600493","600495","600496","600497","600498","600499","600500","600501","600502","600503","600505","600506","600507","600508","600509","600510","600511","600512","600513","600515","600516","600517","600518","600519","600520","600521","600522","600523","600525","600526","600527","600528","600529","600530","600531","600532","600533","600535","600536","600537","600538","600539","600540","600543","600545","600546","600547","600548","600549","600550","600551","600552","600553","600555","600556","600557","600558","600559","600560","600561","600562","600563","600565","600566","600567","600568","600569","600570","600571","600572","600573","600575","600576","600577","600578","600579","600580","600581","600582","600583","600584","600585","600586","600587","600588","600589","600590","600591","600592","600593","600594","600595","600596","600597","600598","600599","600600","600601","600602","600603","600604","600605","600606","600607","600608","600609","600610","600611","600612","600613","600614","600615","600616","600617","600618","600619","600620","600621","600622","600623","600624","600625","600626","600627","600628","600629","600630","600631","600632","600633","600634","600635","600636","600637","600638","600639","600640","600641","600642","600643","600644","600645","600646","600647","600648","600649","600650","600651","600652","600653","600654","600655","600656","600657","600658","600659","600660","600661","600662","600663","600664","600665","600666","600667","600668","600669","600670","600671","600672","600673","600674","600675","600676","600677","600678","600679","600680","600681","600682","600683","600684","600685","600686","600687","600688","600689","600690","600691","600692","600693","600694","600695","600696","600697","600698","600699","600700","600701","600702","600703","600704","600705","600706","600707","600708","600709","600710","600711","600712","600713","600714","600715","600716","600717","600718","600719","600720","600721","600722","600723","600724","600725","600726","600727","600728","600729","600730","600731","600732","600733","600734","600735","600736","600737","600738","600739","600740","600741","600742","600743","600744","600745","600746","600747","600748","600749","600750","600751","600752","600753","600754","600755","600756","600757","600758","600759","600760","600761","600762","600763","600764","600765","600766","600767","600768","600769","600770","600771","600772","600773","600774","600775","600776","600777","600778","600779","600780","600781","600782","600783","600784","600785","600786","600787","600788","600789","600790","600791","600792","600793","600794","600795","600796","600797","600798","600799","600800","600801","600802","600803","600804","600805","600806","600807","600808","600809","600810","600811","600812","600813","600814","600815","600816","600817","600818","600819","600820","600821","600822","600823","600824","600825","600826","600827","600828","600829","600830","600831","600832","600833","600834","600835","600836","600837","600838","600839","600840","600841","600842","600843","600844","600845","600846","600847","600848","600849","600850","600851","600852","600853","600854","600855","600856","600857","600858","600859","600860","600861","600862","600863","600864","600865","600866","600867","600868","600869","600870","600871","600872","600873","600874","600875","600876","600877","600878","600879","600880","600881","600882","600883","600884","600885","600886","600887","600888","600889","600890","600891","600892","600893","600894","600895","600896","600897","600898","600899","600900","600901","600903","600908","600909","600917","600919","600926","600928","600929","600933","600936","600939","600958","600959","600960","600961","600962","600963","600965","600966","600967","600968","600969","600970","600971","600973","600975","600976","600977","600978","600979","600980","600981","600982","600983","600984","600985","600986","600987","600988","600989","600990","600991","600992","600993","600995","600996","600997","600998","600999","601000","601001","601002","601003","601005","601006","601007","601008","601009","601010","601011","601012","601015","601016","601018","601019","601020","601021","601028","601038","601058","601066","601068","601069","601086","601088","601098","601099","601100","601101","601106","601107","601108","601111","601113","601116","601117","601118","601126","601127","601128","601137","601138","601139","601155","601158","601162","601163","601166","601168","601169","601177","601179","601186","601188","601198","601199","601200","601206","601208","601211","601212","601216","601218","601222","601225","601226","601228","601229","601231","601233","601236","601238","601258","601268","601288","601298","601299","601311","601313","601318","601319","601326","601328","601330","601333","601336","601339","601360","601366","601368","601369","601375","601377","601388","601390","601398","601500","601515","601518","601519","601555","601558","601566","601567","601577","601579","601588","601595","601598","601599","601600","601601","601606","601607","601608","601611","601615","601616","601618","601619","601628","601633","601636","601666","601668","601669","601677","601678","601688","601689","601698","601699","601700","601717","601718","601727","601766","601777","601788","601789","601798","601799","601800","601801","601808","601811","601818","601828","601838","601857","601858","601860","601865","601866","601869","601872","601877","601878","601880","601881","601882","601886","601888","601890","601898","601899","601900","601901","601908","601918","601919","601928","601929","601933","601939","601949","601952","601958","601965","601966","601968","601969","601975","601985","601988","601989","601990","601991","601992","601996","601997","601998","601999","603000","603001","603002","603003","603005","603006","603007","603008","603009","603010","603011","603012","603013","603015","603016","603017","603018","603019","603020","603021","603022","603023","603025","603026","603027","603028","603029","603030","603031","603032","603033","603035","603036","603037","603038","603039","603040","603041","603042","603043","603045","603050","603055","603056","603058","603059","603060","603063","603066","603067","603068","603069","603076","603077","603078","603079","603080","603081","603083","603085","603086","603088","603089","603090","603093","603096","603098","603099","603100","603101","603103","603105","603106","603108","603110","603111","603113","603115","603116","603117","603118","603121","603123","603126","603127","603128","603129","603131","603133","603136","603138","603139","603156","603157","603158","603159","603160","603161","603165","603166","603167","603168","603169","603177","603178","603179","603180","603181","603183","603185","603186","603187","603188","603189","603192","603196","603197","603198","603199","603200","603203","603208","603214","603217","603218","603220","603222","603223","603225","603226","603227","603228","603229","603232","603233","603236","603238","603239","603256","603258","603259","603260","603266","603267","603268","603269","603277","603278","603279","603283","603286","603288","603289","603297","603298","603299","603300","603301","603302","603303","603305","603306","603308","603309","603311","603313","603315","603316","603317","603318","603319","603320","603321","603322","603323","603326","603327","603328","603329","603330","603331","603332","603333","603335","603336","603337","603338","603339","603345","603348","603351","603355","603356","603357","603358","603359","603360","603363","603365","603366","603367","603368","603369","603377","603378","603379","603380","603383","603385","603386","603387","603388","603389","603393","603396","603398","603399","603416","603421","603429","603444","603456","603458","603466","603477","603486","603488","603496","603499","603500","603501","603505","603506","603507","603508","603515","603516","603517","603518","603519","603520","603527","603528","603530","603533","603535","603536","603538","603555","603556","603557","603558","603559","603566","603567","603568","603569","603577","603578","603579","603580","603583","603585","603586","603587","603588","603589","603590","603595","603596","603598","603599","603600","603601","603602","603603","603605","603606","603607","603608","603609","603611","603612","603613","603615","603616","603617","603618","603619","603626","603628","603629","603630","603633","603636","603637","603638","603639","603648","603650","603655","603656","603657","603658","603659","603660","603661","603662","603663","603665","603666","603667","603668","603669","603676","603677","603678","603679","603680","603681","603683","603685","603686","603687","603688","603689","603690","603693","603696","603697","603698","603699","603700","603701","603703","603706","603707","603708","603709","603711","603712","603713","603716","603717","603718","603721","603722","603725","603726","603727","603728","603729","603730","603733","603737","603738","603739","603755","603757","603758","603766","603767","603768","603773","603776","603777","603778","603779","603786","603787","603788","603789","603790","603797","603798","603799","603800","603801","603803","603806","603808","603809","603810","603811","603813","603815","603816","603817","603818","603819","603822","603823","603825","603826","603828","603829","603833","603838","603839","603843","603848","603855","603856","603858","603859","603860","603861","603863","603866","603867","603868","603869","603871","603876","603877","603878","603879","603880","603881","603882","603883","603885","603886","603887","603888","603889","603890","603895","603896","603897","603898","603899","603900","603901","603903","603906","603908","603909","603912","603915","603916","603917","603918","603919","603920","603922","603926","603927","603928","603929","603933","603936","603937","603938","603939","603955","603956","603958","603959","603960","603963","603966","603967","603968","603969","603970","603976","603977","603978","603979","603980","603982","603983","603985","603986","603987","603988","603989","603990","603991","603992","603993","603996","603997","603998","603999","688001","688002","688003","688005","688006","688007","688008","688009","688010","688011","688012","688015","688016","688018","688019","688020","688022","688028","688029","688033","688066","688088","688099","688116","688122","688168","688188","688321","688333","688388","900901","900902","900903","900904","900905","900906","900907","900908","900909","900910","900911","900912","900913","900914","900915","900916","900917","900918","900919","900920","900921","900922","900923","900924","900925","900926","900927","900928","900929","900930","900931","900932","900933","900934","900935","900936","900937","900938","900939","900940","900941","900942","900943","900945","900946","900947","900948","900949","900950","900951","900952","900953","900955","900956","900957"]
        shenzhen_stockid_list = ["000001","000002","000003","000004","000005","000006","000007","000008","000009","000010","000011","000012","000013","000014","000015","000016","000017","000018","000019","000020","000021","000022","000023","000024","000025","000026","000027","000028","000029","000030","000031","000032","000033","000034","000035","000036","000037","000038","000039","000040","000042","000043","000045","000046","000047","000048","000049","000050","000055","000056","000058","000059","000060","000061","000062","000063","000065","000066","000068","000069","000070","000078","000088","000089","000090","000096","000099","000100","000150","000151","000153","000155","000156","000157","000158","000159","000166","000301","000333","000338","000400","000401","000402","000403","000404","000405","000406","000407","000408","000409","000410","000411","000412","000413","000415","000416","000417","000418","000419","000420","000421","000422","000423","000425","000426","000428","000429","000430","000488","000498","000501","000502","000503","000504","000505","000506","000507","000508","000509","000510","000511","000513","000514","000515","000516","000517","000518","000519","000520","000521","000522","000523","000524","000525","000526","000527","000528","000529","000530","000531","000532","000533","000534","000535","000536","000537","000538","000539","000540","000541","000542","000543","000544","000545","000546","000547","000548","000549","000550","000551","000552","000553","000554","000555","000556","000557","000558","000559","000560","000561","000562","000563","000564","000565","000566","000567","000568","000569","000570","000571","000572","000573","000576","000578","000581","000582","000583","000584","000585","000586","000587","000588","000589","000590","000591","000592","000593","000594","000595","000596","000597","000598","000599","000600","000601","000602","000603","000605","000606","000607","000608","000609","000610","000611","000612","000613","000615","000616","000617","000618","000619","000620","000621","000622","000623","000625","000626","000627","000628","000629","000630","000631","000632","000633","000635","000636","000637","000638","000639","000650","000651","000652","000653","000655","000656","000657","000658","000659","000660","000661","000662","000663","000665","000666","000667","000668","000669","000670","000671","000672","000673","000675","000676","000677","000678","000679","000680","000681","000682","000683","000685","000686","000687","000688","000689","000690","000691","000692","000693","000695","000697","000698","000699","000700","000701","000702","000703","000705","000707","000708","000709","000710","000711","000712","000713","000715","000716","000717","000718","000719","000720","000721","000722","000723","000725","000726","000727","000728","000729","000730","000731","000732","000733","000735","000736","000737","000738","000739","000748","000750","000751","000752","000753","000755","000756","000757","000758","000759","000760","000761","000762","000763","000765","000766","000767","000768","000769","000776","000777","000778","000779","000780","000782","000783","000785","000786","000787","000788","000789","000790","000791","000792","000793","000795","000796","000797","000798","000799","000800","000801","000802","000803","000805","000806","000807","000809","000810","000811","000812","000813","000815","000816","000817","000818","000819","000820","000821","000822","000823","000825","000826","000827","000828","000829","000830","000831","000832","000833","000835","000836","000837","000838","000839","000848","000850","000851","000852","000856","000858","000859","000860","000861","000862","000863","000866","000868","000869","000875","000876","000877","000878","000880","000881","000882","000883","000885","000886","000887","000888","000889","000890","000892","000893","000895","000897","000898","000899","000900","000901","000902","000903","000905","000906","000908","000909","000910","000911","000912","000913","000915","000916","000917","000918","000919","000920","000921","000922","000923","000925","000926","000927","000928","000929","000930","000931","000932","000933","000935","000936","000937","000938","000939","000948","000949","000950","000951","000952","000953","000955","000956","000957","000958","000959","000960","000961","000962","000963","000965","000966","000967","000968","000969","000970","000971","000972","000973","000975","000976","000977","000978","000979","000980","000981","000982","000983","000985","000987","000988","000989","000990","000991","000993","000995","000996","000997","000998","000999","001696","001872","001896","001965","001979","002001","002002","002003","002004","002005","002006","002007","002008","002009","002010","002011","002012","002013","002014","002015","002016","002017","002018","002019","002020","002021","002022","002023","002024","002025","002026","002027","002028","002029","002030","002031","002032","002033","002034","002035","002036","002037","002038","002039","002040","002041","002042","002043","002044","002045","002046","002047","002048","002049","002050","002051","002052","002053","002054","002055","002056","002057","002058","002059","002060","002061","002062","002063","002064","002065","002066","002067","002068","002069","002070","002071","002072","002073","002074","002075","002076","002077","002078","002079","002080","002081","002082","002083","002084","002085","002086","002087","002088","002089","002090","002091","002092","002093","002094","002095","002096","002097","002098","002099","002100","002101","002102","002103","002104","002105","002106","002107","002108","002109","002110","002111","002112","002113","002114","002115","002116","002117","002118","002119","002120","002121","002122","002123","002124","002125","002126","002127","002128","002129","002130","002131","002132","002133","002134","002135","002136","002137","002138","002139","002140","002141","002142","002143","002144","002145","002146","002147","002148","002149","002150","002151","002152","002153","002154","002155","002156","002157","002158","002159","002160","002161","002162","002163","002164","002165","002166","002167","002168","002169","002170","002171","002172","002173","002174","002175","002176","002177","002178","002179","002180","002181","002182","002183","002184","002185","002186","002187","002188","002189","002190","002191","002192","002193","002194","002195","002196","002197","002198","002199","002200","002201","002202","002203","002204","002205","002206","002207","002208","002209","002210","002211","002212","002213","002214","002215","002216","002217","002218","002219","002220","002221","002222","002223","002224","002225","002226","002227","002228","002229","002230","002231","002232","002233","002234","002235","002236","002237","002238","002239","002240","002241","002242","002243","002244","002245","002246","002247","002248","002249","002250","002251","002252","002253","002254","002255","002256","002257","002258","002259","002260","002261","002262","002263","002264","002265","002266","002267","002268","002269","002270","002271","002272","002273","002274","002275","002276","002277","002278","002279","002280","002281","002282","002283","002284","002285","002286","002287","002288","002289","002290","002291","002292","002293","002294","002295","002296","002297","002298","002299","002300","002301","002302","002303","002304","002305","002306","002307","002308","002309","002310","002311","002312","002313","002314","002315","002316","002317","002318","002319","002320","002321","002322","002323","002324","002325","002326","002327","002328","002329","002330","002331","002332","002333","002334","002335","002336","002337","002338","002339","002340","002341","002342","002343","002344","002345","002346","002347","002348","002349","002350","002351","002352","002353","002354","002355","002356","002357","002358","002359","002360","002361","002362","002363","002364","002365","002366","002367","002368","002369","002370","002371","002372","002373","002374","002375","002376","002377","002378","002379","002380","002381","002382","002383","002384","002385","002386","002387","002388","002389","002390","002391","002392","002393","002394","002395","002396","002397","002398","002399","002400","002401","002402","002403","002404","002405","002406","002407","002408","002409","002410","002411","002412","002413","002414","002415","002416","002417","002418","002419","002420","002421","002422","002423","002424","002425","002426","002427","002428","002429","002430","002431","002432","002433","002434","002435","002436","002437","002438","002439","002440","002441","002442","002443","002444","002445","002446","002447","002448","002449","002450","002451","002452","002453","002454","002455","002456","002457","002458","002459","002460","002461","002462","002463","002464","002465","002466","002467","002468","002469","002470","002471","002472","002473","002474","002475","002476","002477","002478","002479","002480","002481","002482","002483","002484","002485","002486","002487","002488","002489","002490","002491","002492","002493","002494","002495","002496","002497","002498","002499","002500","002501","002502","002503","002504","002505","002506","002507","002508","002509","002510","002511","002512","002513","002514","002515","002516","002517","002518","002519","002520","002521","002522","002523","002524","002525","002526","002527","002528","002529","002530","002531","002532","002533","002534","002535","002536","002537","002538","002539","002540","002541","002542","002543","002544","002545","002546","002547","002548","002549","002550","002551","002552","002553","002554","002555","002556","002557","002558","002559","002560","002561","002562","002563","002564","002565","002566","002567","002568","002569","002570","002571","002572","002573","002574","002575","002576","002577","002578","002579","002580","002581","002582","002583","002584","002585","002586","002587","002588","002589","002590","002591","002592","002593","002594","002595","002596","002597","002598","002599","002600","002601","002602","002603","002604","002605","002606","002607","002608","002609","002610","002611","002612","002613","002614","002615","002616","002617","002618","002619","002620","002621","002622","002623","002624","002625","002626","002627","002628","002629","002630","002631","002632","002633","002634","002635","002636","002637","002638","002639","002640","002641","002642","002643","002644","002645","002646","002647","002648","002649","002650","002651","002652","002653","002654","002655","002656","002657","002658","002659","002660","002661","002662","002663","002664","002665","002666","002667","002668","002669","002670","002671","002672","002673","002674","002675","002676","002677","002678","002679","002680","002681","002682","002683","002684","002685","002686","002687","002688","002689","002690","002691","002692","002693","002694","002695","002696","002697","002698","002699","002700","002701","002702","002703","002705","002706","002707","002708","002709","002710","002711","002712","002713","002714","002715","002716","002717","002718","002719","002720","002721","002722","002723","002724","002725","002726","002727","002728","002729","002730","002731","002732","002733","002734","002735","002736","002737","002738","002739","002740","002741","002742","002743","002745","002746","002747","002748","002749","002750","002751","002752","002753","002755","002756","002757","002758","002759","002760","002761","002762","002763","002765","002766","002767","002768","002769","002770","002771","002772","002773","002774","002775","002776","002777","002778","002779","002780","002781","002782","002783","002785","002786","002787","002788","002789","002790","002791","002792","002793","002795","002796","002797","002798","002799","002800","002801","002802","002803","002805","002806","002807","002808","002809","002810","002811","002812","002813","002815","002816","002817","002818","002819","002820","002821","002822","002823","002824","002825","002826","002827","002828","002829","002830","002831","002832","002833","002835","002836","002837","002838","002839","002840","002841","002842","002843","002845","002846","002847","002848","002849","002850","002851","002852","002853","002855","002856","002857","002858","002859","002860","002861","002862","002863","002864","002865","002866","002867","002868","002869","002870","002871","002872","002873","002875","002876","002877","002878","002879","002880","002881","002882","002883","002884","002885","002886","002887","002888","002889","002890","002891","002892","002893","002895","002896","002897","002898","002899","002900","002901","002902","002903","002905","002906","002907","002908","002909","002910","002911","002912","002913","002915","002916","002917","002918","002919","002920","002921","002922","002923","002925","002926","002927","002928","002929","002930","002931","002932","002933","002935","002936","002937","002938","002939","002940","002941","002942","002943","002945","002946","002947","002948","002949","002950","002951","002952","002953","002955","002956","002957","002958","002959","002960","002961","002962","002966","003816","031005","031007","038011","038014","038015","038016","038017","131800","131801","131802","131803","131805","131806","131809","131810","131811","131900","131901","131910","131911","150001","150002","150003","150006","150007","150008","150009","150010","150011","150012","150013","150016","150017","150018","150019","150020","150021","150022","150023","150025","150026","150027","150028","150029","150030","150031","150032","150033","150034","150035","150036","150037","150038","150039","150040","150041","150042","150043","150044","150045","150046","150047","150048","150049","150050","150051","150052","150053","150054","150055","150056","150057","150058","150059","150060","150061","150062","150063","150064","150065","150066","150067","150068","150069","150070","150071","150072","150073","150075","150076","150077","150078","150079","150080","150081","150082","150083","150084","150085","150086","150087","150088","150089","150090","150091","150092","150093","150094","150095","150096","150097","150098","150099","150100","150101","150102","150104","150105","150106","150107","150108","150109","150110","150111","150112","150113","150114","150115","150117","150118","150120","150121","150122","150123","150124","150127","150128","150129","150130","150131","150132","150133","150134","150135","150136","150137","150138","150139","150140","150141","150142","150143","150144","150145","150146","150147","150148","150149","150150","150151","150152","150153","150154","150156","150157","150158","150160","150161","150164","150165","150167","150168","150169","150170","150171","150172","150173","150174","150175","150176","150177","150178","150179","150180","150181","150182","150184","150185","150186","150187","150188","150189","150190","150191","150192","150193","150194","150195","150196","150197","150198","150199","150200","150201","150203","150204","150205","150206","150207","150208","150209","150210","150211","150212","150213","150214","150215","150216","150217","150218","150219","150220","150221","150222","150223","150224","150225","150226","150227","150228","150229","150230","150231","150232","150233","150234","150235","150236","150237","150238","150241","150242","150243","150244","150245","150246","150247","150248","150249","150250","150251","150252","150255","150256","150257","150258","150259","150260","150261","150262","150263","150264","150265","150266","150267","150268","150269","150270","150271","150272","150273","150274","150275","150276","150277","150278","150279","150280","150281","150282","150283","150284","150287","150288","150289","150290","150291","150292","150293","150294","150295","150296","150297","150298","150299","150300","150301","150302","150303","150304","150305","150306","150307","150308","150309","150310","150311","150312","150315","150316","150317","150318","150321","150322","150323","150324","150325","150326","150327","150328","150329","150330","150331","150332","150335","150336","150343","150344","159001","159003","159005","159901","159902","159903","159905","159906","159907","159908","159909","159910","159911","159912","159913","159915","159916","159917","159918","159919","159920","159921","159922","159923","159924","159925","159926","159927","159928","159929","159930","159931","159932","159933","159934","159935","159936","159937","159938","159939","159940","159941","159942","159943","159944","159945","159946","159948","159949","159950","159951","159952","159953","159954","159955","159956","159957","159958","159959","159960","159961","159962","159963","159964","159965","159966","159967","159969","159971","159973","160105","160106","160119","160123","160125","160128","160130","160131","160133","160138","160140","160142","160211","160212","160215","160216","160220","160223","160225","160311","160314","160322","160323","160324","160415","160416","160421","160422","160505","160512","160513","160515","160518","160519","160520","160522","160607","160610","160611","160613","160615","160616","160617","160618","160621","160622","160635","160642","160643","160644","160706","160716","160717","160719","160720","160722","160723","160726","160805","160806","160807","160809","160810","160812","160813","160910","160915","160916","160918","160919","160921","160922","160924","160925","161005","161010","161014","161015","161017","161019","161029","161033","161035","161036","161037","161038","161039","161115","161116","161117","161119","161124","161125","161126","161127","161128","161129","161130","161131","161132","161210","161211","161213","161216","161217","161219","161222","161224","161225","161226","161227","161229","161230","161232","161233","161505","161607","161610","161614","161626","161630","161631","161706","161713","161714","161715","161716","161722","161727","161728","161810","161811","161813","161815","161820","161821","161823","161831","161834","161835","161903","161907","161908","161911","161912","162006","162105","162108","162207","162215","162307","162308","162411","162414","162415","162416","162510","162605","162607","162703","162711","162712","162715","162717","162718","162719","163001","163003","163005","163110","163111","163112","163119","163208","163210","163302","163402","163407","163409","163412","163415","163417","163503","163801","163819","163821","163824","163827","163907","164105","164205","164206","164208","164210","164302","164403","164509","164606","164701","164702","164703","164705","164808","164810","164812","164814","164815","164823","164824","164902","164906","165309","165311","165313","165317","165508","165509","165510","165512","165513","165516","165517","165525","165528","165705","165806","165807","166001","166006","166007","166008","166009","166011","166012","166016","166023","166024","166025","166105","166401","166402","166902","166904","167001","167002","167003","167501","167901","168002","168101","168102","168103","168104","168105","168106","168108","168301","168401","169101","169102","169103","169104","169105","169106","169201","169301","184688","184689","184690","184691","184692","184693","184695","184696","184698","184699","184700","184701","184702","184703","184705","184706","184708","184709","184710","184711","184712","184713","184718","184719","184720","184721","184722","184728","184738","184801","200002","200003","200011","200012","200013","200015","200016","200017","200018","200019","200020","200022","200024","200025","200026","200028","200029","200030","200037","200039","200041","200045","200053","200054","200055","200056","200057","200058","200152","200160","200168","200413","200418","200429","200468","200488","200505","200512","200513","200521","200530","200539","200541","200550","200553","200570","200581","200596","200613","200625","200706","200725","200726","200761","200770","200771","200869","200986","200992","201872","300001","300002","300003","300004","300005","300006","300007","300008","300009","300010","300011","300012","300013","300014","300015","300016","300017","300018","300019","300020","300021","300022","300023","300024","300025","300026","300027","300028","300029","300030","300031","300032","300033","300034","300035","300036","300037","300038","300039","300040","300041","300042","300043","300044","300045","300046","300047","300048","300049","300050","300051","300052","300053","300054","300055","300056","300057","300058","300059","300061","300062","300063","300064","300065","300066","300067","300068","300069","300070","300071","300072","300073","300074","300075","300076","300077","300078","300079","300080","300081","300082","300083","300084","300085","300086","300087","300088","300089","300090","300091","300092","300093","300094","300095","300096","300097","300098","300099","300100","300101","300102","300103","300104","300105","300106","300107","300108","300109","300110","300111","300112","300113","300114","300115","300116","300117","300118","300119","300120","300121","300122","300123","300124","300125","300126","300127","300128","300129","300130","300131","300132","300133","300134","300135","300136","300137","300138","300139","300140","300141","300142","300143","300144","300145","300146","300147","300148","300149","300150","300151","300152","300153","300154","300155","300156","300157","300158","300159","300160","300161","300162","300163","300164","300165","300166","300167","300168","300169","300170","300171","300172","300173","300174","300175","300176","300177","300178","300179","300180","300181","300182","300183","300184","300185","300186","300187","300188","300189","300190","300191","300192","300193","300194","300195","300196","300197","300198","300199","300200","300201","300202","300203","300204","300205","300206","300207","300208","300209","300210","300211","300212","300213","300214","300215","300216","300217","300218","300219","300220","300221","300222","300223","300224","300225","300226","300227","300228","300229","300230","300231","300232","300233","300234","300235","300236","300237","300238","300239","300240","300241","300242","300243","300244","300245","300246","300247","300248","300249","300250","300251","300252","300253","300254","300255","300256","300257","300258","300259","300260","300261","300262","300263","300264","300265","300266","300267","300268","300269","300270","300271","300272","300273","300274","300275","300276","300277","300278","300279","300280","300281","300282","300283","300284","300285","300286","300287","300288","300289","300290","300291","300292","300293","300294","300295","300296","300297","300298","300299","300300","300301","300302","300303","300304","300305","300306","300307","300308","300309","300310","300311","300312","300313","300314","300315","300316","300317","300318","300319","300320","300321","300322","300323","300324","300325","300326","300327","300328","300329","300330","300331","300332","300333","300334","300335","300336","300337","300338","300339","300340","300341","300342","300343","300344","300345","300346","300347","300348","300349","300350","300351","300352","300353","300354","300355","300356","300357","300358","300359","300360","300361","300362","300363","300364","300365","300366","300367","300368","300369","300370","300371","300372","300373","300374","300375","300376","300377","300378","300379","300380","300381","300382","300383","300384","300385","300386","300387","300388","300389","300390","300391","300392","300393","300394","300395","300396","300397","300398","300399","300400","300401","300402","300403","300404","300405","300406","300407","300408","300409","300410","300411","300412","300413","300414","300415","300416","300417","300418","300419","300420","300421","300422","300423","300424","300425","300426","300427","300428","300429","300430","300431","300432","300433","300434","300435","300436","300437","300438","300439","300440","300441","300442","300443","300444","300445","300446","300447","300448","300449","300450","300451","300452","300453","300454","300455","300456","300457","300458","300459","300460","300461","300462","300463","300464","300465","300466","300467","300468","300469","300470","300471","300472","300473","300474","300475","300476","300477","300478","300479","300480","300481","300482","300483","300484","300485","300486","300487","300488","300489","300490","300491","300492","300493","300494","300495","300496","300497","300498","300499","300500","300501","300502","300503","300504","300505","300506","300507","300508","300509","300510","300511","300512","300513","300514","300515","300516","300517","300518","300519","300520","300521","300522","300523","300525","300526","300527","300528","300529","300530","300531","300532","300533","300534","300535","300536","300537","300538","300539","300540","300541","300542","300543","300545","300546","300547","300548","300549","300550","300551","300552","300553","300554","300555","300556","300557","300558","300559","300560","300561","300562","300563","300565","300566","300567","300568","300569","300570","300571","300572","300573","300575","300576","300577","300578","300579","300580","300581","300582","300583","300584","300585","300586","300587","300588","300589","300590","300591","300592","300593","300594","300595","300596","300597","300598","300599","300600","300601","300602","300603","300604","300605","300606","300607","300608","300609","300610","300611","300612","300613","300615","300616","300617","300618","300619","300620","300621","300622","300623","300624","300625","300626","300627","300628","300629","300630","300631","300632","300633","300634","300635","300636","300637","300638","300639","300640","300641","300642","300643","300644","300645","300646","300647","300648","300649","300650","300651","300652","300653","300654","300655","300656","300657","300658","300659","300660","300661","300662","300663","300664","300665","300666","300667","300668","300669","300670","300671","300672","300673","300674","300675","300676","300677","300678","300679","300680","300681","300682","300683","300684","300685","300686","300687","300688","300689","300690","300691","300692","300693","300694","300695","300696","300697","300698","300699","300700","300701","300702","300703","300705","300706","300707","300708","300709","300710","300711","300712","300713","300715","300716","300717","300718","300719","300720","300721","300722","300723","300724","300725","300726","300727","300728","300729","300730","300731","300732","300733","300735","300736","300737","300738","300739","300740","300741","300742","300743","300745","300746","300747","300748","300749","300750","300751","300752","300753","300755","300756","300757","300758","300759","300760","300761","300762","300763","300765","300766","300767","300768","300769","300770","300771","300772","300773","300775","300776","300777","300778","300779","300780","300781","300782","300783","300785","300786","300787","300788","300789","300790"]
        year_list = ["1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"]
        # year_list = ["2018"]
        jidu_list = ['1','2','3','4']

        for k in shanghai_stockid_list:
            for i in year_list:
                for j in jidu_list:
                    yield scrapy.Request(url=base_url + k + '.phtml?' + "year=" + i + "&" + "jidu=" + j,headers=self.headers, callback=self.parse, dont_filter=True)

    def parse(self, response):
        item = GupiaoXinlangItem()
        gupiao_info = response.xpath('//*[@id="FundHoldSharesTable"]/thead/tr/th/text()').extract()[0].replace('\n', '').replace('\t','').replace('\r','')
        gupiao_name = gupiao_info.split('(')[0]
        gupiao_id = gupiao_info.split('(')[1].split(')')[0]
        print(gupiao_name + "-------------" + gupiao_id)

        for data_tr in response.xpath('//*[@id="FundHoldSharesTable"]/tr'):
            if len(data_tr.css('div')[1].css('div::text').extract()) == 1:
                opening_price = float(data_tr.css('div')[1].css('div::text').extract()[0])
            if len(data_tr.css('div')[2].css('div::text').extract()) == 1:
                high_price = float(data_tr.css('div')[2].css('div::text').extract()[0])
            if len(data_tr.css('div')[3].css('div::text').extract()) == 1:
                closing_price = float(data_tr.css('div')[3].css('div::text').extract()[0])
            if len(data_tr.css('div')[4].css('div::text').extract()) == 1:
                low_price = float(data_tr.css('div')[4].css('div::text').extract()[0])
            if len(data_tr.css('div')[5].css('div::text').extract()) == 1:
                total_volume = int(data_tr.css('div')[5].css('div::text').extract()[0])
            if len(data_tr.css('div')[6].css('div::text').extract()) == 1:
                total_price = int(data_tr.css('div')[6].css('div::text').extract()[0])

            date_list = data_tr.css('div a::text').extract()
            for date_info in date_list:
                date_info = date_info.replace('\n', '').replace('\t','').replace('\r','')
                item['gupiao_name'] = gupiao_name
                item['gupiao_id'] = gupiao_id
                item['date_info'] = date_info
                item['opening_price'] = opening_price
                item['high_price'] = high_price
                item['closing_price'] = closing_price
                item['low_price'] = low_price
                item['total_volume'] = total_volume
                item['total_price'] = total_price
                yield item